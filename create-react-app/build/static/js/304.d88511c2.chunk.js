"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[304],{7304:function(e,t,a){a.r(t);var s=a(7313),r=a(9019),n=a(6835),l=a(3477),o=a(4076),i=a(7478),c=a(3467),d=a(1550),h=a(3306),u=a(8797),x=a(1405),p=a(8111),j=a(4631),g=a(1095),y=a(3497),Z=a(2401),v=a(6417);t.default=e=>{let{data:t,updateData:a}=e;const[m,f]=s.useState([]),[b,w]=s.useState([]),[C,S]=s.useState([]);s.useEffect((()=>(k(),A(),()=>{f([]),w([]),S([])})),[]);const k=()=>{fetch("http://192.168.0.110:8080/spares/sparesCategory").then((async e=>{if(!e.ok){const t=await e.text();throw new Error(t||e.statusText)}return e.json()})).then((e=>{f(e)})).catch((e=>{console.log(e.message)}))},A=()=>{fetch("http://192.168.0.110:8080/spares").then((async e=>{if(!e.ok){const t=await e.text();throw new Error(t||e.statusText)}return e.json()})).then((e=>{S(e)})).catch((e=>{console.log(e.message)}))},_=(e,s,r)=>{const n=[...t];n[e][s]=r,a(n)},I=e=>{(async e=>{await fetch("http://192.168.0.110:8080/spares/findSparesInventoryWithFilter",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((async e=>{if(!e.ok){const t=await e.text();throw new Error(t||e.statusText)}return e.json()})).then((e=>{console.log(e),w(e)})).catch((e=>{console.log(e.message)}))})({categoryList:[e]})};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(y.Z,{title:"Job Spares Information",children:(0,v.jsx)(r.ZP,{container:!0,direction:"row",spacing:Z.dv,children:(0,v.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,v.jsx)("div",{style:{overflowX:"auto"},children:(0,v.jsxs)(n.Z,{style:{minWidth:1e3},children:[(0,v.jsx)(l.Z,{children:(0,v.jsxs)(o.Z,{children:[(0,v.jsx)(i.Z,{children:"Spares Category"}),(0,v.jsx)(i.Z,{children:"Spares"}),(0,v.jsx)(i.Z,{children:"Quantity"}),(0,v.jsx)(i.Z,{children:"Rate"}),(0,v.jsx)(i.Z,{children:"Amount"}),(0,v.jsx)(i.Z,{children:"Action"})]})}),(0,v.jsx)(c.Z,{children:t.map(((e,s)=>(0,v.jsxs)(o.Z,{children:[(0,v.jsx)(i.Z,{children:(0,v.jsxs)(d.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,v.jsx)(h.Z,{id:"demo-simple-select-standard-label"}),(0,v.jsx)(u.Z,{fullWidth:!0,labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard-label",value:(null===e||void 0===e?void 0:e.category)||"",label:"Category Type",sx:{"& .MuiSelect-select":{color:"black"}},onChange:e=>{I(e.target.value),_(s,"category",e.target.value)},children:m.map((e=>(0,v.jsx)(x.Z,{value:e.category,children:e.category},e.id)))})]})}),(0,v.jsx)(i.Z,{children:(0,v.jsx)(p.Z,{options:b,getOptionLabel:e=>e.desc,style:{width:300},value:C.find((t=>t.desc===e.sparesAndLabour))||null,isOptionEqualToValue:(e,t)=>e.id===t.id,onChange:(e,t)=>{console.log("new value is "+JSON.stringify(t)),_(s,"sparesAndLabour",t.desc),_(s,"rate",t.sellRate),_(s,"sparesId",t.id)},renderInput:e=>(0,v.jsx)(j.Z,{...e,label:"Search Spares"})})}),(0,v.jsx)(i.Z,{children:(0,v.jsx)(j.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.qty)||"",onChange:t=>{const a=t.target.value;_(s,"qty",a),_(s,"amount",a*(null===e||void 0===e?void 0:e.rate)||0)}})}),(0,v.jsx)(i.Z,{children:(0,v.jsx)(j.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.rate)||"",onChange:e=>_(s,"rate",e.target.value)})}),(0,v.jsx)(i.Z,{children:(0,v.jsx)(j.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.amount)||"",onChange:e=>_(s,"amount",e.target.value)})}),(0,v.jsx)(i.Z,{children:(0,v.jsx)(g.Z,{variant:"contained",color:"error",onClick:()=>(e=>{const s=[...t];s.splice(e,1),s.length>0?a(s):a([...Array(1)].map((()=>({sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",amount:""}))))})(s),children:"Delete"})})]},s)))})]})}),(0,v.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,v.jsx)("br",{}),(0,v.jsx)(g.Z,{variant:"contained",color:"error",onClick:()=>{const e=[...Array(1)].map((()=>({sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",amount:""})));a((t=>[...t,...e]))},children:"Add Row"})]})]})})})})}}}]);