"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[811],{8190:function(e,a,t){t.r(a);var s=t(7313),l=t(9019),r=t(3306),n=t(8797),i=t(1405),c=t(4631),o=t(1095),d=t(3497),u=t(2401),h=t(9881),x=t(3984),m=t(6417);a.default=function(e){let{data:a,setSparesUpdateOpen:t,fetchAllSparesData:v}=e;const[p,g]=(0,s.useState)(a||{}),[j,Z]=(0,s.useState)([]),[y,f]=s.useState(!1),[b,C]=s.useState(""),[P,R]=s.useState("");(0,s.useEffect)((()=>(S(),()=>{g({}),Z([])})),[]),(0,s.useEffect)((()=>{g(a||{})}),[a]);const S=()=>{fetch("http://localhost:8080/spares/sparesCategory").then((async e=>{if(!e.ok){const a=await e.text();throw new Error(a||e.statusText)}return e.json()})).then((e=>{Z(e)})).catch((e=>{console.log(e.message)}))};return(0,m.jsxs)("div",{children:[(0,m.jsx)(d.Z,{title:"Enter Spares Details",children:(0,m.jsxs)(l.ZP,{container:!0,direction:"row",spacing:u.dv,children:[(0,m.jsxs)(l.ZP,{item:!0,xs:3,children:[(0,m.jsx)(r.Z,{id:"demo-select-small",required:!0,children:"Category Type"}),(0,m.jsx)(n.Z,{labelId:"demo-select-small",id:"demo-select-small",value:p.category||"",label:"Category Type",onChange:e=>{const a={...p,category:e.target.value};g(a)},children:j.map((e=>(0,m.jsx)(i.Z,{value:e.category,children:e.category},e.id)))})]}),(0,m.jsxs)(l.ZP,{item:!0,xs:3,children:[(0,m.jsx)("br",{}),(0,m.jsx)(c.Z,{label:"PartNo./Type",required:!0,variant:"outlined",value:p.partNumber||"",onChange:e=>{const a={...p,partNumber:e.target.value};g(a)}})]}),(0,m.jsxs)(l.ZP,{item:!0,xs:6,children:[(0,m.jsx)("br",{}),(0,m.jsx)(c.Z,{label:"Spares Description",required:!0,variant:"standard",fullWidth:!0,value:p.desc||"",onChange:e=>{const a={...p,desc:e.target.value};g(a)}})]}),(0,m.jsx)(l.ZP,{item:!0,xs:4,children:(0,m.jsx)(c.Z,{label:"Quantity",required:!0,variant:"outlined",value:p.qty||"",onChange:e=>{const a=e.target.value,t=parseFloat(a)*(parseFloat(p.sellRate)||0),s=parseFloat(t.toFixed(2)),l={...p,qty:a,amount:isNaN(s)?"":s};g(l)}})}),(0,m.jsx)(l.ZP,{item:!0,xs:4,children:(0,m.jsx)(c.Z,{label:"Minimum Threshold",required:!0,variant:"outlined",value:p.minThresh||"",onChange:e=>{const a={...p,minThresh:e.target.value};g(a)}})}),(0,m.jsx)(l.ZP,{item:!0,xs:4,children:(0,m.jsx)(c.Z,{label:"Purchase Rate",required:!0,variant:"outlined",value:p.purchaseRate||"",onChange:e=>{const a={...p,purchaseRate:e.target.value};g(a)}})}),(0,m.jsx)(l.ZP,{item:!0,xs:4,children:(0,m.jsx)(c.Z,{label:"Sell Rate",required:!0,variant:"outlined",value:p.sellRate||"",onChange:e=>{const a=e.target.value,t=(parseFloat(a)||0)*parseFloat(p.qty||0),s=parseFloat(t.toFixed(2)),l={...p,sellRate:a,amount:isNaN(s)?"":s};g(l)}})}),(0,m.jsx)(l.ZP,{item:!0,xs:4,children:(0,m.jsx)(c.Z,{label:"Amount",variant:"standard",value:p.amount||"",InputProps:{readOnly:!0}})}),(0,m.jsx)(l.ZP,{item:!0,xs:4,children:(0,m.jsx)(c.Z,{label:"Rack/Bin",variant:"standard",fullWidth:!0,value:p.rack||"",onChange:e=>{const a={...p,rack:e.target.value};g(a)}})}),(0,m.jsx)(l.ZP,{item:!0,xs:4,children:(0,m.jsx)(c.Z,{label:"MRP",variant:"standard",fullWidth:!0,value:p.misc1||"",onChange:e=>{const a={...p,misc1:e.target.value};g(a)}})}),(0,m.jsx)(l.ZP,{item:!0,xs:4,children:(0,m.jsx)(c.Z,{label:"Misc 2",variant:"standard",fullWidth:!0,value:p.misc2||"",onChange:e=>{const a={...p,misc2:e.target.value};g(a)}})}),(0,m.jsx)(l.ZP,{item:!0,xs:4,children:(0,m.jsx)(c.Z,{label:"Misc 3",variant:"standard",fullWidth:!0,value:p.misc3||"",onChange:e=>{const a={...p,misc3:e.target.value};g(a)}})})]})}),(0,m.jsx)("br",{}),(0,m.jsx)("div",{className:"content",children:p.category&&p.partNumber&&p.desc&&null!==p.purchaseRate&&void 0!==p.purchaseRate&&null!==p.qty&&void 0!==p.qty&&null!==p.sellRate&&void 0!==p.sellRate&&null!==p.amount&&void 0!==p.amount&&p.minThresh&&(0,m.jsx)(o.Z,{variant:"contained",color:"error",onClick:()=>(async e=>{await fetch("http://localhost:8080/spares",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((async e=>{if(!e.ok){const a=await e.text();throw new Error(a||e.statusText)}return e.json()})).then((e=>{v&&v(),t&&t(!1),C(e.desc+" added successfully "),R("success"),f(!0),console.log(e)})).catch((e=>{console.log(e.message),C(e.message),R("info"),f(!0)}))})(p),children:"Add/Update Spares"})}),y&&(0,m.jsx)(x.Z,{sx:{width:"100%"},spacing:2,children:(0,m.jsx)(h.Z,{variant:"filled",severity:P,onClose:()=>f(!1),children:b})})]})}}}]);