"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[649],{4649:function(e,r,a){a.r(r),a.d(r,{default:function(){return M}});var s=a(7313),t=a(4096),l=a(9860),n=a(7458),i=a(6396),o=a(6149),c=a(4117),d=a(6467),h=a(1689),u=a(7131),x=a(3604),m=a(1550),j=a(3306),p=a(8797),b=a(1405),Z=a(1095),v=a(7829),y=a(1171),g=a(6417),P=(0,y.Z)((0,g.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew"),f=a(9881),w=a(3984),C=a(1113),O=a(9019),N=a(4631),S=a(9536),k=a(4002),z=a(2401);var E=function(e){let{open:r,onClose:a,job:m}=e;const[j,p]=s.useState({});s.useEffect((()=>(b(m.id),()=>{p({})})),[m]);const b=e=>{fetch("http://localhost:8080/jobCard/jobSpares/"+e).then((async e=>{if(!e.ok){const r=await e.text();throw new Error(r||e.statusText)}return e.json()})).then((e=>{p(e)})).catch((e=>{console.log(e.message)}))},v=s.useMemo((()=>[{accessorKey:"complaints",header:"Complaints",size:250},{accessorKey:"completed",header:"Status",size:100},{accessorKey:"remarks",header:"Remarks",size:250}]),[]),y=s.useMemo((()=>[{accessorKey:"sparesAndLabour",header:"Spares/Labour",size:250},{accessorKey:"qty",header:"Quantity",size:100},{accessorKey:"rate",header:"Rate",size:100},{accessorKey:"amount",header:"Amount",size:100}]),[]),P=(0,l.Z)(),f=s.useMemo((()=>(0,n.Z)({palette:{mode:P.palette.mode,primary:P.palette.secondary,info:{main:"rgb(255,122,0)"},background:{default:"rgba(0, 0, 0, 0)"}},typography:{button:{textTransform:"none",fontSize:"1.2rem"}},components:{MuiTooltip:{styleOverrides:{tooltip:{fontSize:"1.1rem"}}},MuiSwitch:{styleOverrides:{thumb:{color:"pink"}}}}})),[P]),w="#faf4f3",E="#f2f0f6";return(0,g.jsxs)(o.Z,{open:r,onClose:a,"aria-labelledby":"data-row-dialog-title",fullWidth:!0,maxWidth:"lg",children:[(0,g.jsx)(x.Z,{id:"data-row-dialog-title",children:(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,g.jsx)(C.Z,{variant:"h4",children:"JobCard: "+m.jobId+" VehicleNo.: "+m.vehicleRegNo}),(0,g.jsx)(h.Z,{title:"Download Jobcard",children:(0,g.jsx)(u.Z,{onClick:()=>{fetch("http://localhost:8080/jobCard/pdf/"+m.id).then((async e=>{if(!e.ok){const r=await e.text();throw new Error(r||e.statusText)}return e.blob()})).then((e=>{const r=window.URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.setAttribute("download",m.jobId+"_"+m.vehicleRegNo+".pdf"),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)})).catch((e=>{console.log(e.message)}))},color:"primary",children:(0,g.jsx)(k.Z,{})})})]})}),(0,g.jsxs)(d.Z,{dividers:!0,style:{backgroundColor:"white",color:"black"},children:[" ",(0,g.jsxs)(O.ZP,{container:!0,direction:"row",spacing:z.dv,children:[(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsxs)(O.ZP,{container:!0,direction:"row",spacing:z.dv,children:[(0,g.jsx)(O.ZP,{item:!0,xs:6,children:(0,g.jsx)(N.Z,{label:"Owner Name",variant:"outlined",value:m.ownerName||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:6,children:(0,g.jsx)(N.Z,{label:"Owner PhoneNumber",variant:"outlined",value:m.ownerPhoneNumber||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:8,children:(0,g.jsx)(N.Z,{label:"Owner Address",fullWidth:!0,margin:"dense",multiline:!0,variant:"outlined",value:m.ownerAddress||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Owner Email",fullWidth:!0,margin:"dense",variant:"outlined",value:m.ownerEmailId||"",InputProps:{readOnly:!0}})})]})}),(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsx)(S.Z,{})}),(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsxs)(O.ZP,{container:!0,direction:"row",spacing:z.dv,children:[(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Vehicle Reg. No.",variant:"outlined",value:m.vehicleRegNo||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Vehicle Name",variant:"outlined",value:m.vehicleName||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Vehicle Model",variant:"outlined",value:m.vehicleModel||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Vehicle K.Ms",variant:"outlined",value:m.kiloMeters||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Technician Name",variant:"outlined",value:m.technicianName||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Driver Name",variant:"outlined",value:m.driver||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Vehicle Out Date",variant:"outlined",value:m.vehicleOutDate||"",InputProps:{readOnly:!0}})})]})}),(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsx)(S.Z,{})}),(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsx)(i.Z,{theme:f,children:(0,g.jsx)(t.P2,{columns:v,data:m.jobInfo||[],muiTablePaperProps:{elevation:0,sx:{borderRadius:"0",background:`linear-gradient(195deg, ${w}, ${E})`}}})})}),(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsx)(S.Z,{})}),(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsx)(i.Z,{theme:f,children:(0,g.jsx)(t.P2,{columns:y,data:j.jobSparesInfo||[],muiTablePaperProps:{elevation:0,sx:{borderRadius:"0",background:`linear-gradient(195deg, ${w}, ${E})`}}})})}),(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsx)(S.Z,{})}),(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsx)(i.Z,{theme:f,children:(0,g.jsx)(t.P2,{columns:y,data:j.jobLaborInfo||[],muiTablePaperProps:{elevation:0,sx:{borderRadius:"0",background:`linear-gradient(195deg, ${w}, ${E})`}}})})}),(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsx)(S.Z,{})}),(0,g.jsx)(O.ZP,{item:!0,xs:12,children:(0,g.jsxs)(O.ZP,{container:!0,direction:"row",spacing:z.dv,children:[(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Total Spares Value",variant:"outlined",value:j.totalSparesValue||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Total Labour Value",variant:"outlined",value:j.totalLabourValue||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(O.ZP,{item:!0,xs:4,children:(0,g.jsx)(N.Z,{label:"Grand Total",variant:"outlined",value:j.grandTotal||"",InputProps:{readOnly:!0}})})]})})]})]}),(0,g.jsx)(c.Z,{children:(0,g.jsx)(Z.Z,{onClick:a,children:"Close"})})]})};const I=e=>{let{cell:r}=e;return(0,g.jsx)(v.Z,{component:"span",sx:()=>({cursor:"pointer",backgroundColor:"OPEN"===r.getValue()?"green":"red",borderRadius:"0.35rem",maxWidth:"9ch",p:"0.25rem"}),children:r.getValue()})};var M=()=>{const[e,r]=(0,s.useState)([]),[a,y]=(0,s.useState)(!1),[C,O]=(0,s.useState)({}),[N,S]=(0,s.useState)(!1),[k,z]=s.useState(!1),[M,K]=s.useState("");(0,s.useEffect)((()=>(T(),()=>{r([]),y(!1),O({}),S(!1)})),[]);const T=()=>{fetch("http://localhost:8080/jobCard").then((async e=>{if(!e.ok){const r=await e.text();throw new Error(r||e.statusText)}return e.json()})).then((e=>{r(e)})).catch((e=>{console.log(e.message)}))},V=()=>{O({}),y(!1),S(!1)},L=async e=>{await fetch("http://localhost:8080/jobCard/jobStatus",{method:"PUT",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((async e=>{if(!e.ok){const r=await e.text();throw new Error(r||e.statusText)}return e.json()})).then((e=>{console.log(e),O({}),y(!1),T()})).catch((e=>{console.log(e.message),K(e.message),z(!0),O({}),y(!1)}))},R=(0,s.useMemo)((()=>[{accessorKey:"jobId",header:"Job Card No.",size:150},{accessorKey:"jobStatus",header:"Status",size:150,filterVariant:"select",filterSelectOptions:["OPEN","CLOSED","CANCELLED"],Header:(0,g.jsx)("i",{style:{color:"blue"},children:"Status"}),Cell:I,muiTableBodyCellProps:e=>{let{cell:r}=e;return{onClick:()=>{O(r.row.original),y(!0)}}}},{accessorKey:"ownerName",header:"Owner Name",size:150},{accessorKey:"ownerPhoneNumber",header:"Phone",size:200},{accessorKey:"vehicleRegNo",header:"Reg. No.",size:150},{accessorKey:"vehicleName",header:"Vehicle Name",size:150},{accessorKey:"vehicleModel",header:"Model",size:200},{accessorKey:"kiloMeters",header:"kiloMeters",size:150},{accessorKey:"technicianName",header:"Technician",size:150},{accessorKey:"driver",header:"Driver",size:150},{accessorKey:"vehicleOutDate",header:"Vechicle Out Date",size:150},{accessorKey:"ownerAddress",header:"Address",size:150},{accessorKey:"ownerEmailId",header:"Email",size:150}]),[]),D=(0,l.Z)(),A=(0,s.useMemo)((()=>(0,n.Z)({palette:{mode:D.palette.mode,primary:D.palette.secondary,info:{main:"rgb(255,122,0)"},background:{default:"rgba(0, 0, 0, 0)"}},typography:{button:{textTransform:"none",fontSize:"1.2rem"}},components:{MuiTooltip:{styleOverrides:{tooltip:{fontSize:"1.1rem"}}},MuiSwitch:{styleOverrides:{thumb:{color:"pink"}}}}})),[D]);return(0,g.jsxs)("div",{children:[k&&(0,g.jsx)(w.Z,{sx:{width:"100%"},spacing:2,children:(0,g.jsx)(f.Z,{variant:"filled",severity:"info",onClose:()=>z(!1),children:M})}),(0,g.jsxs)(i.Z,{theme:A,children:[(0,g.jsx)(t.P2,{columns:R,data:e,editingMode:"modal",enableEditing:!0,muiTablePaperProps:{elevation:0,sx:{borderRadius:"0",background:"linear-gradient(195deg, #fff, #c38b81)"}},renderRowActions:e=>{let{row:r}=e;return(0,g.jsx)(v.Z,{sx:{display:"flex",gap:"1rem"},children:(0,g.jsx)(h.Z,{arrow:!0,placement:"right",title:"Open Job Card",children:(0,g.jsx)(u.Z,{onClick:()=>{O(r.original),S(!0)},children:(0,g.jsx)(P,{})})})})}})," "]}),(0,g.jsxs)(o.Z,{open:a,onClose:V,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[(0,g.jsx)(v.Z,{sx:{bgcolor:"#f44336",color:"#FFFFFF",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 1.25rem"},children:(0,g.jsx)(x.Z,{id:"scroll-dialog-title",sx:{flexGrow:1,fontSize:"1.5rem"},children:C.vehicleRegNo})}),(0,g.jsx)(d.Z,{dividers:"paper"===scroll,children:(0,g.jsxs)(m.Z,{variant:"outlined",style:{margin:"1px 0"},children:[(0,g.jsx)(j.Z,{children:"Job Status"}),(0,g.jsxs)(p.Z,{value:(null===C||void 0===C?void 0:C.jobStatus)||"",onChange:e=>{const r={...C,jobStatus:e.target.value};O(r)},label:"Status",children:[(0,g.jsx)(b.Z,{value:"CLOSED",children:"CLOSED"}),(0,g.jsx)(b.Z,{value:"OPEN",children:"OPEN"}),(0,g.jsx)(b.Z,{value:"CANCELLED",children:"CANCELLED"})]})]})}),(0,g.jsxs)(c.Z,{children:[(0,g.jsx)(Z.Z,{onClick:()=>{L(C),T(),V()},color:"primary",children:"Save"}),(0,g.jsx)(Z.Z,{onClick:V,color:"secondary",children:"Close"})]})]}),(0,g.jsx)(E,{open:N,onClose:V,job:C})]})}},4002:function(e,r,a){var s=a(4836);r.Z=void 0;var t=s(a(5045)),l=a(6417),n=(0,t.default)((0,l.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download");r.Z=n}}]);