"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[724],{3724:function(e,t,r){r.r(t);var a=r(7313),n=r(4096),o=r(9860),s=r(7458),i=r(6396),l=r(7829),c=r(1689),d=r(7131),h=r(6149),p=r(6467),x=r(9019),u=r(9536),m=r(1113),j=r(4117),Z=r(1095),g=r(1207),y=r(2401),f=r(9546),b=r(3483),P=r(6417);const k=(0,f.Z)((0,a.lazy)((()=>r.e(151).then(r.bind(r,6120)))));t.default=()=>{const[e,t]=(0,a.useState)([]),[r,f]=(0,a.useState)([]),[v,w]=(0,a.useState)({}),[C,_]=(0,a.useState)(!1);(0,a.useEffect)((()=>(z(),()=>{f([])})),[]);const E=()=>{_(!1)},z=async()=>{try{const e=await(0,b.A_)("/api/externalWork");f(e)}catch(e){console.error(e.message)}},S=(0,a.useMemo)((()=>[{accessorKey:"category",header:"Category",size:150,filterVariant:"multi-select"},{accessorKey:"desc",header:"Desc",size:250},{accessorKey:"amount",header:"Amount",size:100}]),[]),M=(0,o.Z)(),W=(0,a.useMemo)((()=>(0,s.Z)({palette:{mode:M.palette.mode,primary:M.palette.secondary,info:{main:"rgb(255,122,0)"},background:{default:"rgba(0, 0, 0, 0)"}},typography:{button:{textTransform:"none",fontSize:"1.2rem"}},components:{MuiTooltip:{styleOverrides:{tooltip:{fontSize:"1.1rem"}}},MuiSwitch:{styleOverrides:{thumb:{color:"pink"}}}}})),[M]);return(0,P.jsxs)("div",{children:[(0,P.jsxs)(i.Z,{theme:W,children:[(0,P.jsx)(n.P2,{columns:S,data:r,enableFacetedValues:!0,editingMode:"modal",enableEditing:!0,muiTablePaperProps:{elevation:0,sx:{borderRadius:"0",background:"linear-gradient(195deg, #e2d7d5, #4f4563)"}},renderRowActions:e=>{let{row:t}=e;return(0,P.jsx)(l.Z,{sx:{display:"flex",gap:"1rem"},children:(0,P.jsx)(c.Z,{arrow:!0,placement:"left",title:"Update ExternalWork Info",children:(0,P.jsx)(d.Z,{onClick:()=>{_(!1),w(t.original),_(!0)},children:(0,P.jsx)(g.Z,{})})})})}})," "]}),(0,P.jsx)("br",{}),(0,P.jsxs)(h.Z,{open:C,onClose:E,"aria-labelledby":"data-row-dialog-title",fullWidth:!0,maxWidth:"lg",children:[(0,P.jsxs)(p.Z,{dividers:!0,style:{backgroundColor:"white",color:"black"},children:[" ",(0,P.jsx)(x.ZP,{container:!0,spacing:y.dv,children:(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsxs)(x.ZP,{container:!0,spacing:y.dv,children:[(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(u.Z,{})}),(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(m.Z,{variant:"h2",children:"Updating ExternalWork: "+v.desc})}),(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(k,{data:v,setExternalWorkUpdateOpen:_,fetchAllExternalWorkData:z})})]})})})]}),(0,P.jsx)(j.Z,{children:(0,P.jsx)(Z.Z,{onClick:E,children:"Close"})})]}),(0,P.jsx)("br",{}),(0,P.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(m.Z,{variant:"h6",children:"Upload Photos"})}),(0,P.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,P.jsx)("input",{type:"file",accept:"image/*",multiple:!0,capture:"environment",onChange:e=>{const r=Array.from(e.target.files);t(r)},style:{display:"none"},id:"photo-input"}),(0,P.jsx)("label",{htmlFor:"photo-input",children:(0,P.jsx)(Z.Z,{variant:"contained",component:"span",children:"Take Photos"})})]}),(0,P.jsx)(x.ZP,{item:!0,xs:12,children:e.length>0&&(0,P.jsx)(l.Z,{children:(0,P.jsxs)(m.Z,{variant:"body1",children:[e.length," photo(s) selected."]})})}),(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(Z.Z,{variant:"contained",color:"primary",onClick:async()=>{if(0===e.length)return void alert("Please select photos to upload.");const r=new FormData;e.forEach(((e,t)=>{r.append(`photo_${t}`,e)}));try{(await fetch("/api/photos",{method:"POST",body:r})).ok?(alert("Photos uploaded successfully!"),t([])):alert("Failed to upload photos.")}catch(a){console.error("Error uploading photos:",a),alert("An error occurred during upload.")}},disabled:0===e.length,children:"Upload Photos"})})]})]})}},1207:function(e,t,r){var a=r(1171),n=r(6417);t.Z=(0,a.Z)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")}}]);