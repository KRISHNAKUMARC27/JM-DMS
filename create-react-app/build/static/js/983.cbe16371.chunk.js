"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[983],{1983:function(e,a,t){t.r(a);var r=t(7313),l=t(9019),s=t(6835),n=t(3477),o=t(4076),i=t(7478),d=t(3467),c=t(1550),u=t(3306),h=t(8797),x=t(1405),j=t(8111),g=t(4631),m=t(1095),v=t(3497),y=t(2401),Z=t(3483),p=t(6417);a.default=e=>{let{data:a,updateData:t}=e;const[b,f]=r.useState([]),[C,A]=r.useState([]),[L,w]=r.useState([]);r.useEffect((()=>(_(),I(),()=>{f([]),A([]),w([])})),[]);const _=async()=>{try{const e=await(0,Z.A_)("/api/labor/laborCategory");f(e)}catch(e){console.log(e.message)}},I=async()=>{try{const e=await(0,Z.A_)("/api/labor");w(e)}catch(e){console.log(e.message)}},k=(e,r,l)=>{const s=[...a];s[e][r]=l,t(s)},W=e=>{(async e=>{try{const a=await(0,Z.j0)("/api/labor/findLaborInventoryWithFilter",e);A(a)}catch(a){console.log(a.message)}})({categoryList:[e]})};return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(v.Z,{title:"Job Labor Information",children:(0,p.jsx)(l.ZP,{container:!0,direction:"row",spacing:y.dv,children:(0,p.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,p.jsx)("div",{style:{overflowX:"auto"},children:(0,p.jsxs)(s.Z,{style:{minWidth:1e3},children:[(0,p.jsx)(n.Z,{children:(0,p.jsxs)(o.Z,{children:[(0,p.jsx)(i.Z,{children:"Labor Category"}),(0,p.jsx)(i.Z,{children:"Labor"}),(0,p.jsx)(i.Z,{children:"Quantity"}),(0,p.jsx)(i.Z,{children:"Rate"}),(0,p.jsx)(i.Z,{children:"Amount"}),(0,p.jsx)(i.Z,{children:"Action"})]})}),(0,p.jsx)(d.Z,{children:a.map(((e,r)=>(0,p.jsxs)(o.Z,{children:[(0,p.jsx)(i.Z,{children:(0,p.jsxs)(c.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,p.jsx)(u.Z,{id:"demo-simple-select-standard-label"}),(0,p.jsx)(h.Z,{fullWidth:!0,labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard-label",value:(null===e||void 0===e?void 0:e.category)||"",label:"Category Type",sx:{"& .MuiSelect-select":{color:"black"}},onChange:e=>{W(e.target.value),k(r,"category",e.target.value)},children:b.map((e=>(0,p.jsx)(x.Z,{value:e.category,children:e.category},e.id)))})]})}),(0,p.jsx)(i.Z,{children:(0,p.jsx)(j.Z,{options:C.filter((e=>!a.some((a=>a.sparesId===e.id)))),getOptionLabel:e=>e.desc,style:{width:300},value:L.find((a=>a.desc===e.sparesAndLabour))||null,isOptionEqualToValue:(e,a)=>e.id===a.id,onChange:(a,t)=>{console.log("new value is "+JSON.stringify(t)),k(r,"sparesAndLabour",t.desc),k(r,"rate",t.amount),k(r,"amount",t.amount*(null===e||void 0===e?void 0:e.qty)||0),k(r,"sparesId",t.id)},renderInput:a=>(0,p.jsx)(g.Z,{...a,label:"Search Labor",disabled:!!e.sparesId})})}),(0,p.jsx)(i.Z,{children:(0,p.jsx)(g.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.qty)||"",onChange:a=>{const t=a.target.value;k(r,"qty",t),k(r,"amount",t*(null===e||void 0===e?void 0:e.rate)||0)}})}),(0,p.jsx)(i.Z,{children:(0,p.jsx)(g.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.rate)||"",onChange:e=>k(r,"rate",e.target.value)})}),(0,p.jsx)(i.Z,{children:(0,p.jsx)(g.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.amount)||"",onChange:e=>k(r,"amount",e.target.value)})}),(0,p.jsx)(i.Z,{children:(0,p.jsx)(m.Z,{variant:"contained",color:"error",onClick:()=>(e=>{const r=[...a];r.splice(e,1),r.length>0?t(r):t([...Array(1)].map((()=>({sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",amount:""}))))})(r),children:"Delete"})})]},r)))})]})}),(0,p.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,p.jsx)("br",{}),(0,p.jsx)(m.Z,{variant:"contained",color:"error",onClick:()=>{const e=[...Array(1)].map((()=>({sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",amount:""})));t((a=>[...a,...e]))},children:"Add Row"})]})]})})})})}}}]);