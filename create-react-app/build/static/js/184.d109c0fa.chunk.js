"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[184],{6120:function(e,t,a){a.r(t);var r=a(7313),s=a(9019),n=a(3306),l=a(8797),o=a(1405),c=a(4631),i=a(1095),d=a(3497),u=a(2401),h=a(9881),x=a(3984),g=a(6417);t.default=function(e){let{data:t,setExternalWorkUpdateOpen:a,fetchAllExternalWorkData:m}=e;const[f,j]=(0,r.useState)(t||{}),[y,p]=(0,r.useState)([]),[v,k]=r.useState(!1),[Z,b]=r.useState(""),[w,C]=r.useState("");(0,r.useEffect)((()=>(E(),()=>{j({}),p([])})),[]),(0,r.useEffect)((()=>{j(t||{})}),[t]);const E=()=>{fetch("/api/externalWork/externalWorkCategory").then((async e=>{if(!e.ok){const t=await e.text();throw new Error(t||e.statusText)}return e.json()})).then((e=>{p(e)})).catch((e=>{console.log(e.message)}))};return(0,g.jsxs)("div",{children:[(0,g.jsx)(d.Z,{title:"Enter ExternalWork Details",children:(0,g.jsxs)(s.ZP,{container:!0,direction:"row",spacing:u.dv,children:[(0,g.jsxs)(s.ZP,{item:!0,xs:3,children:[(0,g.jsx)(n.Z,{id:"demo-select-small",required:!0,children:"Category Type"}),(0,g.jsx)(l.Z,{labelId:"demo-select-small",id:"demo-select-small",value:f.category||"",label:"Category Type",onChange:e=>{const t={...f,category:e.target.value};j(t)},children:y.map((e=>(0,g.jsx)(o.Z,{value:e.category,children:e.category},e.id)))})]}),(0,g.jsxs)(s.ZP,{item:!0,xs:6,children:[(0,g.jsx)("br",{}),(0,g.jsx)(c.Z,{label:"ExternalWork Description",required:!0,variant:"standard",fullWidth:!0,value:f.desc||"",onChange:e=>{const t={...f,desc:e.target.value};j(t)}})]}),(0,g.jsx)(s.ZP,{item:!0,xs:4,children:(0,g.jsx)(c.Z,{label:"Amount",required:!0,variant:"outlined",value:f.amount||"",onChange:e=>{const t={...f,amount:e.target.value};j(t)}})})]})}),(0,g.jsx)("br",{}),(0,g.jsx)("div",{className:"content",children:f.category&&f.desc&&null!==f.amount&&void 0!==f.amount&&(0,g.jsx)(i.Z,{variant:"contained",color:"error",onClick:()=>(async e=>{await fetch("/api/externalWork",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((async e=>{if(!e.ok){const t=await e.text();throw new Error(t||e.statusText)}return e.json()})).then((e=>{m&&m(),a&&a(!1),b(e.desc+" added successfully "),C("success"),k(!0),console.log(e)})).catch((e=>{console.log(e.message),b(e.message),C("info"),k(!0)}))})(f),children:"Add/Update ExternalWork"})}),v&&(0,g.jsx)(x.Z,{sx:{width:"100%"},spacing:2,children:(0,g.jsx)(h.Z,{variant:"filled",severity:w,onClose:()=>k(!1),children:Z})})]})}}}]);