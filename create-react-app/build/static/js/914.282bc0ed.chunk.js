"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[914],{1914:function(e,s,a){a.r(s);var t=a(7313),n=a(9019),r=a(6835),l=a(3477),o=a(4076),i=a(7478),c=a(3467),d=a(1550),u=a(3306),h=a(8797),m=a(1405),x=a(8111),j=a(4631),p=a(1095),b=a(3497),g=a(2401),y=a(3483),Z=a(6417);s.default=e=>{let{data:s,updateData:a}=e;const[v,f]=t.useState([]),[C,A]=t.useState([]),[w,_]=t.useState([]);t.useEffect((()=>(I(),k(),()=>{f([]),A([]),_([])})),[]);const I=async()=>{try{const e=await(0,y.A_)("/api/consumables/consumablesCategory");f(e)}catch(e){console.log(e.message)}},k=async()=>{try{const e=await(0,y.A_)("/api/consumables");_(e)}catch(e){console.log(e.message)}},L=(e,t,n)=>{const r=[...s];r[e][t]=n,a(r)},S=e=>{(async e=>{try{const s=await(0,y.j0)("/api/consumables/findConsumablesInventoryWithFilter",e);A(s)}catch(s){console.log(s.message)}})({categoryList:[e]})};return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(b.Z,{title:"Job Consumables Information",children:(0,Z.jsx)(n.ZP,{container:!0,direction:"row",spacing:g.dv,children:(0,Z.jsxs)(n.ZP,{item:!0,xs:12,children:[(0,Z.jsx)("div",{style:{overflowX:"auto"},children:(0,Z.jsxs)(r.Z,{style:{minWidth:1e3},children:[(0,Z.jsx)(l.Z,{children:(0,Z.jsxs)(o.Z,{children:[(0,Z.jsx)(i.Z,{children:"Consumables Category"}),(0,Z.jsx)(i.Z,{children:"Consumables"}),(0,Z.jsx)(i.Z,{children:"Amount"}),(0,Z.jsx)(i.Z,{children:"Action"})]})}),(0,Z.jsx)(c.Z,{children:s.map(((e,t)=>(0,Z.jsxs)(o.Z,{children:[(0,Z.jsx)(i.Z,{children:(0,Z.jsxs)(d.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,Z.jsx)(u.Z,{id:"demo-simple-select-standard-label"}),(0,Z.jsx)(h.Z,{fullWidth:!0,labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard-label",value:(null===e||void 0===e?void 0:e.category)||"",label:"Category Type",sx:{"& .MuiSelect-select":{color:"black"}},onChange:e=>{S(e.target.value),L(t,"category",e.target.value)},children:v.map((e=>(0,Z.jsx)(m.Z,{value:e.category,children:e.category},e.id)))})]})}),(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(x.Z,{options:C.filter((e=>!s.some((s=>s.sparesId===e.id)))),getOptionLabel:e=>e.desc,style:{width:300},value:w.find((s=>s.desc===e.sparesAndLabour))||null,isOptionEqualToValue:(e,s)=>e.id===s.id,onChange:(e,s)=>{console.log("new value is "+JSON.stringify(s)),L(t,"sparesAndLabour",s.desc),L(t,"sparesId",s.id)},renderInput:s=>(0,Z.jsx)(j.Z,{...s,label:"Search Consumables",disabled:!!e.sparesId})})}),(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(j.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.amount)||"",onChange:e=>L(t,"amount",e.target.value)})}),(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(p.Z,{variant:"contained",color:"error",onClick:()=>(e=>{const t=[...s];t.splice(e,1),t.length>0?a(t):a([...Array(1)].map((()=>({sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",amount:""}))))})(t),children:"Delete"})})]},t)))})]})}),(0,Z.jsxs)(n.ZP,{item:!0,xs:12,children:[(0,Z.jsx)("br",{}),(0,Z.jsx)(p.Z,{variant:"contained",color:"error",onClick:()=>{const e=[...Array(1)].map((()=>({sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",amount:""})));a((s=>[...s,...e]))},children:"Add Row"})]})]})})})})}}}]);